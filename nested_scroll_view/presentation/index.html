<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NestedScrollView — Quick Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/reveal.js@4.5.0/dist/reveal.css">
    <link rel="stylesheet" href="https://unpkg.com/reveal.js@4.5.0/dist/theme/white.css">
    <style>
      /* Slide-focused, large type, minimal chrome */
      body { background: #F7F6F2; color: #111; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
      .reveal { max-width: 1280px; margin: 0 auto; }
      .reveal .slides section { padding: 48px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
      h1 { color: #111; font-size: 48px; line-height: 1.05; margin: 0 0 12px; }
      p.sub { color: #666; font-size: 20px; margin: 0 0 20px; }
      ul.bullets { list-style: none; padding: 0; margin: 10px 0 0; }
      ul.bullets li { font-size: 20px; margin: 10px 0; }
      .visual { width: 80%; max-width: 1000px; border-radius: 10px; box-shadow: 0 6px 20px rgba(20,20,20,0.08); overflow: hidden; }
      .visual img { width: 100%; height: auto; display: block; }
      /* Smaller avatar, unobtrusive */
      .avatar { position: absolute; right: 18px; top: 18px; width: 40px; height: 40px; border-radius: 50%; overflow: hidden; box-shadow: 0 2px 6px rgba(0,0,0,0.12); }
      .avatar img { width: 100%; height: 100%; object-fit: cover; }
      /* Tidy slide number and controls */
      .reveal .controls, .reveal .progress { opacity: 0.9; }
      @media (max-width: 800px) { h1 { font-size: 32px; } ul.bullets li { font-size: 18px; } }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <!-- Slide 1: Title -->
        <section>
          <div class="avatar"><img src="assets/profile.jpg" alt="profile"></div>
          <h1>NestedScrollView — Quick Demo</h1>
          <p class="sub">Flexible header that collapses while the inner content (tabs & lists) continues to scroll — ideal for gallery and content apps.</p>
        </section>

        <!-- Slide 2: Problem & Motivation (two-column) -->
        <section>
          <div class="two-col" style="width:90%;max-width:1200px;">
            <div class="col text">
              <h2 style="font-size:28px;margin-bottom:8px;">Problem</h2>
              <p>On mobile screens, long pages force users to lose sight of the header (context) or waste space keeping it pinned. We want a header that can be prominent when useful, but yield space for content when needed.</p>
              <h2 style="font-size:28px;margin-top:18px;margin-bottom:8px;">Why it matters</h2>
              <p>Preserves brand/artwork visibility while maximizing available space for content. Keeps controls accessible and context intact.</p>
            </div>
            <div class="col visual" aria-hidden="true">
              <!-- Simple illustrative SVG: header + inner scroll -->
              <svg width="100%" height="240" viewBox="0 0 600 240" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="600" height="100" rx="6" fill="#EDEBE8" />
                <text x="18" y="40" font-size="18" fill="#6b6b6b">Header (expands)</text>
                <rect x="18" y="120" width="140" height="90" rx="6" fill="#fff" stroke="#e0dfdb"/>
                <rect x="172" y="120" width="140" height="90" rx="6" fill="#fff" stroke="#e0dfdb"/>
                <rect x="326" y="120" width="140" height="90" rx="6" fill="#fff" stroke="#e0dfdb"/>
                <text x="18" y="170" font-size="14" fill="#8a8a8a">Inner scroll: tiles/lists</text>
              </svg>
            </div>
          </div>
        </section>

        <!-- Slide 3: Architecture (two-column) -->
        <section>
          <div class="two-col" style="width:90%;max-width:1200px;">
            <div class="col visual">
              <!-- Simple flow diagram -->
              <svg width="100%" height="220" viewBox="0 0 800 220" xmlns="http://www.w3.org/2000/svg">
                <rect x="20" y="20" width="240" height="60" rx="8" fill="#F7F6F2" stroke="#d6d2c8"/>
                <text x="40" y="58" font-size="14" fill="#444">SliverAppBar (outer header)</text>
                <polygon points="280,50 320,40 320,60" fill="#cfc9c0"/>
                <rect x="340" y="20" width="240" height="60" rx="8" fill="#fff" stroke="#d6d2c8"/>
                <text x="370" y="58" font-size="14" fill="#444">NestedScrollView + TabBarView</text>
                <rect x="20" y="120" width="560" height="80" rx="6" fill="#fff" stroke="#e7e5df"/>
                <text x="40" y="160" font-size="13" fill="#666">Inner scrollables (ListView, GridView, TabBar views) — scroll independently but coordinated with the header</text>
              </svg>
            </div>
            <div class="col text">
              <h2 style="font-size:28px;margin-bottom:8px;">Architecture</h2>
              <p>The outer scroll is driven by a SliverAppBar inside a NestedScrollView. The inner scrollables (tabs / lists) are regular scroll views — their position is coordinated so the SliverAppBar expands or collapses smoothly.</p>
            </div>
          </div>
        </section>

        <!-- Slide 4: Key Components -->
        <section>
          <h1>Key components</h1>
          <ul class="bullets" style="margin-top:12px; text-align:left; max-width:900px;">
            <li><strong>SliverAppBar</strong> — flexibleSpace, expandedHeight, pinned. Controls header expansion and collapse.</li>
            <li><strong>NestedScrollView</strong> — coordinates outer and inner scroll views.</li>
            <li><strong>TabBarView / ListView / GridView</strong> — inner content that users scroll through.</li>
          </ul>
        </section>

        <!-- Slide 5: Code — SliverAppBar (Dart) -->
        <section>
          <h1>Code: SliverAppBar</h1>
          <div class="code-wrap" style="width:90%;max-width:1000px;">
            <pre><code class="language-dart">SliverAppBar(
  expandedHeight: 320,
  pinned: true,
  flexibleSpace: FlexibleSpaceBar(
    title: Text('Gallery'),
    background: HeaderArtwork.light(headerImageUrl: headerUrl),
  ),
)</code></pre>
          </div>
        </section>

        <!-- Slide 6: Code — NestedScrollView + Tabs -->
        <section>
          <h1>Code: NestedScrollView + Tabs</h1>
          <div class="code-wrap" style="width:90%;max-width:1000px;">
            <pre><code class="language-dart">NestedScrollView(
  headerSliverBuilder: (_, __) =&gt; [sliverAppBar],
  body: TabBarView(
    children: [GalleryGrid(), AttributesList(), ChatView()],
  ),
)</code></pre>
          </div>
        </section>

        <!-- Slide 7: Demo steps (what to show) -->
        <section>
          <h1>Demo steps</h1>
          <ul class="bullets" style="text-align:left; max-width:900px;">
            <li>Start on the Gallery tab — point out the large header artwork.</li>
            <li>Scroll slowly to show the header shrink and pin behaviour.</li>
            <li>Switch tabs and show inner lists still scroll independently.</li>
            <li>Re-expand header by scrolling up to show smooth reflow.</li>
          </ul>
        </section>

        <!-- Slide 8: Takeaway & Resources -->
        <section>
          <h1>Takeaway & Resources</h1>
          <ul class="bullets" style="text-align:left; max-width:900px;">
            <li>NestedScrollView + SliverAppBar is a small API surface with big UX wins.</li>
            <li>Use flexibleSpace for rich header artwork and safe image handling (loading/error builders).</li>
            <li>See code in the repo under <code>lib/src/</code> — `nested_scroll_demo.dart`, `header_artwork.dart`, `gallery_card.dart`.</li>
          </ul>
          <p style="margin-top:12px;">Questions?</p>
        </section>
      </div>
    </div>

    <script src="https://unpkg.com/reveal.js@4.5.0/dist/reveal.js"></script>
    <!-- Highlight.js for code highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>
      Reveal.initialize({
        hash: true,
        slideNumber: 'c/t',
        controls: true,
        progress: true,
        center: true,
        transition: 'fade',
        backgroundTransition: 'slide',
        width: 1280,
        height: 720,
        margin: 0.08,
      });

      // Highlight code blocks after Reveal initializes
      Reveal.on('ready', function() { if (window.hljs) hljs.highlightAll(); });
    </script>
  </body>
</html>
